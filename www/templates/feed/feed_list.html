<style>
.feedItem{
	border: none;
	margin-top: 1.4em;
	border: 1px solid #ddd;
	background-color: #fff;
	color: #444;
	position: relative;
	z-index: 2;
	display: block;
	font-size: 16px;
}
.funcBox{
	display: flex;
	justify-content: space-between;
	align-items: center;
	height: 2em;
	padding: 0.5em;
	border-top: 1px solid #ddd;
	margin: 0.2em 1em 0 1em;
}
.likeBtn{
	display: flex;
	color: #555;
	font-size: 12px;
}
.unLikeBtn{
	background-color:  #ff7f00;
	opacity: 0.6;
	width: 80px;
	height: 15px;
	color: #555;
	font-size: 12px;
	padding-left: 2%;
	padding-right: 2%;
}
.feedIcon{
	font-size: 1.3em;
	margin-right: 0.3em;
}
.feed-content-reply{
  display: flex;
  width: 100%;
	padding: 0 1.2em;
  flex-direction: row;
  align-items: center;
  border-top: 1px solid lightgray;
}
.feedInfoTop{
	display: flex;
	flex-direction: row;
	margin: 1em 1em 0 1em;
}
.feedImage{
  max-width: 40px;
  max-height: 40px;
  border-radius: 50%;
	margin-right: 0.5em;
}
.replyImage{
	max-width: 30px;
  max-height: 30px;
  border-radius: 50%;
	margin-right: 0.5em;
}
.nameParentBox{
  width: 100%;
  display: flex;
	justify-content: space-between;
}
.feedContent{
	padding: 1em 1em 0 1em;
  width: 100%;
  min-height: 50px;
  max-height: 300px;
  text-overflow: ellipsis;
  overflow: scroll;
}
.replyCont{
	display: flex;
	flex-direction: row;
}
.replyContent{
	display: flex;
	flex-direction: column;
	margin: 0;
}
.nameFont{
	font-size: 1em;
  font-weight: 500;
  color:#333;
}
</style>
<ion-view view-title="{{local}}">
	<ion-nav-buttons side="right">
      <button class="button button-icon ion-button icon-only ion-ios-search-strong" onclick="location.href='#/app/feed/search'"></button>
  </ion-nav-buttons>
	<ion-content style="background-color:#eee;" class="has-header">
		<!-- Feed List -->
		<ion-list>
				<!-- Profile -->
			<div ng-show = isLogged()>
				<div class="profile item-avatar item" style="border-color:#fff;" >
						<image src="{{img}}"></image>
							<button class="button button-icon icon" ng-click="writerOpen()" style="margin-top:-2%;">후기나 생각을 공유해주세요</button>
				</div>
			</div>

			<div class="feedItem" ng-repeat="feeds in feedList">
				<!-- TODO Move These Code Into Feed Single !! -->
					<!-- Profile -->
					<div class="feedInfoTop">
							<img class="feedImage" src={{feeds.feed.user.imageUrl}}></img>
							<div class="nameParentBox">
								<div>
									<span class="nameFont">{{feeds.feed.user.name}}</span><br>
									<span class="dateFont">{{feeds.feed.creationTime}}</span>
								</div>
								<div style="text-align:right">
									 <i class="icon ion-android-pin"></i>
									<span class="addressFont">{{feeds.feed.address}}</span><br>
									<i class="icon ion-ios-heart"></i>
								 <span class="addressFont">{{feeds.feed.likeCount}}회</span><br>
								 <button class="button icon ion-code-working" style="background-color:#fff; width:5px; height:5px; margin-right:-10px;"></button>
								</div>
							</div>
					</div>

					<!-- Content -->
					<div class="feedContent">
						<p>
							<a class="subdued feedFont" href="#/app/feed/single/{{feeds.feed.id}}">

								<span class="feedFont">{{feeds.feed.contents}}</span></a>
						</p>
					</div>
					<!-- Inner Buttons -->
					<div class="funcBox">
						<!-- TODO: Add/Toggle Icon -->
						<div ng-model="feeds.likeBtn" ng-click="like('{{feeds.feed.id}}','{{feeds.userLikeStatus}}') "
						ng-class="feeds.likeBtn?'likeBtn':'unLikeBtn'"><i class="icon feedIcon ion-heart "></i>좋아요</div>

						<div ng-click="replyOpen('{{feeds.feed.id}}')" class="likeBtn">
						<i class="icon feedIcon ion-edit"></i>댓글</div>

						<div ng-click="messageOpen('{{feeds.feed.user.id}}' ,'{{feeds.feed.user.name}}')"
						class="likeBtn"><i class="icon feedIcon ion-social-twitch"></i>쪽지</div>
					</div>

					<!-- Reply -->

					<div class="feed-content-reply" ng-repeat="reply in feeds.reply" style="height:65px;">
						<a href="#/app/feed/message/{{reply.user.id}}"><img src={{reply.user.imageUrl}} class="replyImage" style="margin-top:-1%;" onclick=""></a>
						<div class="replyContent" style="text-overflow: ellipsis;">
							<span class="nameFont">{{reply.user.name}}</span>
							<span style="white-space:pre-line; font-size: 0.8em;">{{reply.contents}}</span>
						</div>
					</div>
				</div>
			</div>
		</ion-list>
	</ion-content>
	<ion-infinite-scroll ng-if = "!noMoreItemsAvailable" on-infinite = "getPage()" distance = "2"></ion-infinite-scroll>
</ion-view>
